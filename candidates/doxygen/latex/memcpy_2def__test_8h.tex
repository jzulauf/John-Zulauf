\section{memcpy/def\_\-test.h File Reference}
\label{memcpy_2def__test_8h}\index{memcpy/def_test.h@{memcpy/def\_\-test.h}}
This file defines the functions types and names for the memcpy performance optimization test. {\bf Memcpy performance test}{\rm (p.\,\pageref{group__memcpy__test})}. 

{\tt \#include \char`\"{}def\_\-test\_\-def.h\char`\"{}}\par
\subsection*{Classes}
\begin{CompactItemize}
\item 
struct {\bf T\_\-def\_\-test}
\begin{CompactList}\small\item\em the structure that {\bf \char`\"{}loop\_\-\char`\"{} Standard loops for testing and reporting}{\rm (p.\,\pageref{group__loop__test})} uses to define the function under test \item\end{CompactList}\end{CompactItemize}
\subsection*{Defines}
\begin{CompactItemize}
\item 
\#define {\bf NUM\_\-TEST}\ (sizeof({\bf def\_\-tests})/sizeof({\bf T\_\-def\_\-test}))
\item 
\#define {\bf DEF\_\-NEXT}(a, tc, c, s, sp, d, dp)\ DEF\_\-NEXT\_\-BOTH\_\-DEF(a,tc,c,s,sp,d,dp)\label{memcpy_2def__test_8h_a1}

\item 
\#define {\bf DEF\_\-RUN}(f, c, sp, dp)\ f(dp,sp,c)\label{memcpy_2def__test_8h_a2}

\end{CompactItemize}
\subsection*{Typedefs}
\begin{CompactItemize}
\item 
typedef void $\ast$($\ast$ {\bf T\_\-def\_\-Fn} )(void $\ast$, const void $\ast$, size\_\-t)
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
void $\ast$ {\bf glibc\_\-memcpy} (void $\ast$dest, const void $\ast$src, size\_\-t n)
\item 
void $\ast$ {\bf lx\_\-memcpy\_\-movq} (void $\ast$dest, const void $\ast$src, size\_\-t n)
\item 
void $\ast$ {\bf lx\_\-memcpy\_\-movq\_\-r} (void $\ast$dest, const void $\ast$src, size\_\-t n)
\item 
void $\ast$ {\bf lx\_\-memcpy\_\-noleal} (void $\ast$dest, const void $\ast$src, size\_\-t n)
\item 
void $\ast$ {\bf lx\_\-memcpy\_\-noleal\_\-128} (void $\ast$dest, const void $\ast$src, size\_\-t n)
\item 
void $\ast$ {\bf lx\_\-memcpy\_\-si0} (void $\ast$dest, const void $\ast$src, size\_\-t n)
\item 
void $\ast$ {\bf lx\_\-memcpy\_\-si1} (void $\ast$dest, const void $\ast$src, size\_\-t n)
\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
{\bf T\_\-def\_\-test} {\bf def\_\-tests} [$\,$]
\end{CompactItemize}


\subsection{Detailed Description}
This file defines the functions types and names for the memcpy performance optimization test. {\bf Memcpy performance test}{\rm (p.\,\pageref{group__memcpy__test})}. 



\subsection{Define Documentation}
\index{memcpy/def_test.h@{memcpy/def\_\-test.h}!NUM_TEST@{NUM\_\-TEST}}
\index{NUM_TEST@{NUM\_\-TEST}!memcpy/def_test.h@{memcpy/def\_\-test.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define NUM\_\-TEST\ (sizeof({\bf def\_\-tests})/sizeof({\bf T\_\-def\_\-test}))}\label{memcpy_2def__test_8h_a0}


The number of entries in def\_\-tests (above) 

\subsection{Typedef Documentation}
\index{memcpy/def_test.h@{memcpy/def\_\-test.h}!T_def_Fn@{T\_\-def\_\-Fn}}
\index{T_def_Fn@{T\_\-def\_\-Fn}!memcpy/def_test.h@{memcpy/def\_\-test.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}typedef void$\ast$($\ast$ {\bf T\_\-def\_\-Fn})(void $\ast$, const void $\ast$, size\_\-t)}\label{memcpy_2def__test_8h_a3}


The function pointer type for the function under test 

\subsection{Function Documentation}
\index{memcpy/def_test.h@{memcpy/def\_\-test.h}!glibc_memcpy@{glibc\_\-memcpy}}
\index{glibc_memcpy@{glibc\_\-memcpy}!memcpy/def_test.h@{memcpy/def\_\-test.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ glibc\_\-memcpy (void $\ast$ {\em dest}, const void $\ast$ {\em src}, size\_\-t {\em n})}\label{memcpy_2def__test_8h_a5}


assembly generated by the 586 inline glibc implementation \index{memcpy/def_test.h@{memcpy/def\_\-test.h}!lx_memcpy_movq@{lx\_\-memcpy\_\-movq}}
\index{lx_memcpy_movq@{lx\_\-memcpy\_\-movq}!memcpy/def_test.h@{memcpy/def\_\-test.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ lx\_\-memcpy\_\-movq (void $\ast$ {\em dest}, const void $\ast$ {\em src}, size\_\-t {\em n})}\label{memcpy_2def__test_8h_a6}


unrolled copy using movq and prefetch \index{memcpy/def_test.h@{memcpy/def\_\-test.h}!lx_memcpy_movq_r@{lx\_\-memcpy\_\-movq\_\-r}}
\index{lx_memcpy_movq_r@{lx\_\-memcpy\_\-movq\_\-r}!memcpy/def_test.h@{memcpy/def\_\-test.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ lx\_\-memcpy\_\-movq\_\-r (void $\ast$ {\em dest}, const void $\ast$ {\em src}, size\_\-t {\em n})}\label{memcpy_2def__test_8h_a7}


unrolled copy using movq and prefetch, with optimized preamble. {\bf Best}. \index{memcpy/def_test.h@{memcpy/def\_\-test.h}!lx_memcpy_noleal@{lx\_\-memcpy\_\-noleal}}
\index{lx_memcpy_noleal@{lx\_\-memcpy\_\-noleal}!memcpy/def_test.h@{memcpy/def\_\-test.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ lx\_\-memcpy\_\-noleal (void $\ast$ {\em dest}, const void $\ast$ {\em src}, size\_\-t {\em n})}\label{memcpy_2def__test_8h_a8}


basic unrolled copy using rep;movsl and prefetch \index{memcpy/def_test.h@{memcpy/def\_\-test.h}!lx_memcpy_noleal_128@{lx\_\-memcpy\_\-noleal\_\-128}}
\index{lx_memcpy_noleal_128@{lx\_\-memcpy\_\-noleal\_\-128}!memcpy/def_test.h@{memcpy/def\_\-test.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ lx\_\-memcpy\_\-noleal\_\-128 (void $\ast$ {\em dest}, const void $\ast$ {\em src}, size\_\-t {\em n})}\label{memcpy_2def__test_8h_a9}


basic unrolled copy using rep;movsl and prefetch, longer stride \index{memcpy/def_test.h@{memcpy/def\_\-test.h}!lx_memcpy_si0@{lx\_\-memcpy\_\-si0}}
\index{lx_memcpy_si0@{lx\_\-memcpy\_\-si0}!memcpy/def_test.h@{memcpy/def\_\-test.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ lx\_\-memcpy\_\-si0 (void $\ast$ {\em dest}, const void $\ast$ {\em src}, size\_\-t {\em n})}\label{memcpy_2def__test_8h_a10}


'noleal' optimization pass 0 \index{memcpy/def_test.h@{memcpy/def\_\-test.h}!lx_memcpy_si1@{lx\_\-memcpy\_\-si1}}
\index{lx_memcpy_si1@{lx\_\-memcpy\_\-si1}!memcpy/def_test.h@{memcpy/def\_\-test.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ lx\_\-memcpy\_\-si1 (void $\ast$ {\em dest}, const void $\ast$ {\em src}, size\_\-t {\em n})}\label{memcpy_2def__test_8h_a11}


'noleal' optimization pass 1, add short buffer escape a preamble reordering to avoid compounding mov and cld stalls. {\bf Best} {\bf non-MMX}. 

\subsection{Variable Documentation}
\index{memcpy/def_test.h@{memcpy/def\_\-test.h}!def_tests@{def\_\-tests}}
\index{def_tests@{def\_\-tests}!memcpy/def_test.h@{memcpy/def\_\-test.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf T\_\-def\_\-test} {\bf def\_\-tests}[$\,$]}\label{memcpy_2def__test_8h_a4}


{\bf Initial value:}

\footnotesize\begin{verbatim} {
                {memcpy, "local" },
                {glibc_memcpy, "libc586"},
                
                
                {lx_memcpy_si1, "lx64si1" },
                
                {lx_memcpy_movq, "movq" },
                {lx_memcpy_movq_r, "movq_r" },
                
}
\end{verbatim}\normalsize 
