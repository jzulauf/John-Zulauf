\section{/users/jcrouse/perforce/drivers/projects/geodelx/linux/glibc/candidates/common/include/bucket\_\-stats.h File Reference}
\label{bucket__stats_8h}\index{/users/jcrouse/perforce/drivers/projects/geodelx/linux/glibc/candidates/common/include/bucket_stats.h@{/users/jcrouse/perforce/drivers/projects/geodelx/linux/glibc/candidates/common/include/bucket\_\-stats.h}}
Types and default settings for {\bf \char`\"{}stats\_\-\char`\"{} Simple Approximate Statitistics Package} {\rm (p.\,\pageref{group__stats})}. 


{\tt \#include $<$stdlib.h$>$}\par
{\tt \#include \char`\"{}rdtsc.h\char`\"{}}\par
\subsection*{Compounds}
\begin{CompactItemize}
\item 
struct {\bf T\_\-stats\_\-mode}
\begin{CompactList}\small\item\em defines the mode contents structure (internal)\item\end{CompactList}\item 
struct {\bf T\_\-stats\_\-range\_\-def}
\begin{CompactList}\small\item\em Defines an msb range and bucket limits for easy hashing and reporting All range values are {\bf inclusive}.\item\end{CompactList}\item 
struct {\bf T\_\-stats\_\-record}
\begin{CompactList}\small\item\em Defines the statisics accumulation record. Cleared by stats\_\-init\_\-record(). All fields valid after stats\_\-compute\_\-stats().\item\end{CompactList}\item 
struct {\bf T\_\-stats\_\-result}
\begin{CompactList}\small\item\em The result type of stats\_\-compute\_\-stats.\item\end{CompactList}\end{CompactItemize}
\subsection*{Defines}
\begin{CompactItemize}
\item 
\index{STATS_MAX_MSB@{STATS\_\-MAX\_\-MSB}!bucket_stats.h@{bucket\_\-stats.h}}\index{bucket_stats.h@{bucket\_\-stats.h}!STATS_MAX_MSB@{STATS\_\-MAX\_\-MSB}}
\#define {\bf STATS\_\-MAX\_\-MSB}\ 24\label{bucket__stats_8h_a0}

\begin{CompactList}\small\item\em the largest msb used to address a bucket range\item\end{CompactList}\item 
\index{STATS_BUCKET_SHIFT@{STATS\_\-BUCKET\_\-SHIFT}!bucket_stats.h@{bucket\_\-stats.h}}\index{bucket_stats.h@{bucket\_\-stats.h}!STATS_BUCKET_SHIFT@{STATS\_\-BUCKET\_\-SHIFT}}
\#define {\bf STATS\_\-BUCKET\_\-SHIFT}\ 4\label{bucket__stats_8h_a1}

\begin{CompactList}\small\item\em number of bits $<$ msb to address a bucket\item\end{CompactList}\item 
\index{STATS_NUM_MODES@{STATS\_\-NUM\_\-MODES}!bucket_stats.h@{bucket\_\-stats.h}}\index{bucket_stats.h@{bucket\_\-stats.h}!STATS_NUM_MODES@{STATS\_\-NUM\_\-MODES}}
\#define {\bf STATS\_\-NUM\_\-MODES}\ 16\label{bucket__stats_8h_a2}

\begin{CompactList}\small\item\em number of modes to use for weighted avg\item\end{CompactList}\item 
\#define {\bf STATS\_\-IGNORE\_\-THRESHOLD}\ 256
\begin{CompactList}\small\item\em Any mode smaller that this (as a fraction of the total number of datapoints) will be ignored in the computation of the weighted more averages.\item\end{CompactList}\item 
\index{STATS_BUCKETS@{STATS\_\-BUCKETS}!bucket_stats.h@{bucket\_\-stats.h}}\index{bucket_stats.h@{bucket\_\-stats.h}!STATS_BUCKETS@{STATS\_\-BUCKETS}}
\#define {\bf STATS\_\-BUCKETS}\ (1 $<$$<$ STATS\_\-BUCKET\_\-SHIFT )\label{bucket__stats_8h_a4}

\begin{CompactList}\small\item\em number of buckets per range\item\end{CompactList}\item 
\index{STATS_BUCKET_MASK@{STATS\_\-BUCKET\_\-MASK}!bucket_stats.h@{bucket\_\-stats.h}}\index{bucket_stats.h@{bucket\_\-stats.h}!STATS_BUCKET_MASK@{STATS\_\-BUCKET\_\-MASK}}
\#define {\bf STATS\_\-BUCKET\_\-MASK}\ (STATS\_\-BUCKETS - 1)\label{bucket__stats_8h_a5}

\begin{CompactList}\small\item\em mask to look at just the bucket index\item\end{CompactList}\item 
\index{STATS_MAX_BUCKET_RANGE@{STATS\_\-MAX\_\-BUCKET\_\-RANGE}!bucket_stats.h@{bucket\_\-stats.h}}\index{bucket_stats.h@{bucket\_\-stats.h}!STATS_MAX_BUCKET_RANGE@{STATS\_\-MAX\_\-BUCKET\_\-RANGE}}
\#define {\bf STATS\_\-MAX\_\-BUCKET\_\-RANGE}\ (STATS\_\-MAX\_\-MSB-STATS\_\-BUCKET\_\-SHIFT)\label{bucket__stats_8h_a6}

\begin{CompactList}\small\item\em number of bucket ranges\item\end{CompactList}\end{CompactItemize}
\subsection*{Typedefs}
\begin{CompactItemize}
\item 
\index{T_stats_modes@{T\_\-stats\_\-modes}!bucket_stats.h@{bucket\_\-stats.h}}\index{bucket_stats.h@{bucket\_\-stats.h}!T_stats_modes@{T\_\-stats\_\-modes}}
typedef {\bf T\_\-stats\_\-mode} {\bf T\_\-stats\_\-modes} [STATS\_\-NUM\_\-MODES]\label{bucket__stats_8h_a7}

\begin{CompactList}\small\item\em defines the mode array\item\end{CompactList}\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
void {\bf stats\_\-init\_\-package} ()
\begin{CompactList}\small\item\em Initializes the Simple Statistics Package, call once before using.\item\end{CompactList}\item 
{\bf T\_\-stats\_\-record} $\ast$ {\bf stats\_\-record\_\-create} ()
\begin{CompactList}\small\item\em Allocates and initalizes statistics record.\item\end{CompactList}\item 
void {\bf stats\_\-record\_\-datapoint} ({\bf T\_\-stats\_\-record} $\ast$rec, {\bf T\_\-tick} t)
\begin{CompactList}\small\item\em Records one datapoint.\item\end{CompactList}\item 
void {\bf stats\_\-record\_\-compute} ({\bf T\_\-stats\_\-record} $\ast$rec, size\_\-t count, char $\ast$name, {\bf T\_\-stats\_\-result} $\ast$result)
\begin{CompactList}\small\item\em Computes the modes and averages from the current statistics record.\item\end{CompactList}\item 
int {\bf stats\_\-get\_\-verbose} ()
\begin{CompactList}\small\item\em Get the verbosity level.\item\end{CompactList}\item 
void {\bf stats\_\-set\_\-verbose} (int verbose)
\begin{CompactList}\small\item\em Set the verbosity level.\item\end{CompactList}\item 
{\bf T\_\-stats\_\-range\_\-def} $\ast$ {\bf stats\_\-get\_\-range\_\-defs} ()
\begin{CompactList}\small\item\em Get the range defs.\item\end{CompactList}\end{CompactItemize}


\subsection{Detailed Description}
Types and default settings for {\bf \char`\"{}stats\_\-\char`\"{} Simple Approximate Statitistics Package} {\rm (p.\,\pageref{group__stats})}.





\subsection{Define Documentation}
\index{bucket_stats.h@{bucket\_\-stats.h}!STATS_IGNORE_THRESHOLD@{STATS\_\-IGNORE\_\-THRESHOLD}}
\index{STATS_IGNORE_THRESHOLD@{STATS\_\-IGNORE\_\-THRESHOLD}!bucket_stats.h@{bucket\_\-stats.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define STATS\_\-IGNORE\_\-THRESHOLD\ 256}\label{bucket__stats_8h_a3}


Any mode smaller that this (as a fraction of the total number of datapoints) will be ignored in the computation of the weighted more averages.

{\bf NOTE}: this is a fairly arbitrary number 100 and 1000 look as good of choices, but this seemed like a way to catch the true \char`\"{}flyers\char`\"{} without ignoring real data 

\subsection{Function Documentation}
\index{bucket_stats.h@{bucket\_\-stats.h}!stats_get_range_defs@{stats\_\-get\_\-range\_\-defs}}
\index{stats_get_range_defs@{stats\_\-get\_\-range\_\-defs}!bucket_stats.h@{bucket\_\-stats.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf T\_\-stats\_\-range\_\-def}$\ast$ stats\_\-get\_\-range\_\-defs ()}\label{bucket__stats_8h_a14}


Get the range defs.

\begin{Desc}
\item[Returns: ]\par
the range defs \end{Desc}
\index{bucket_stats.h@{bucket\_\-stats.h}!stats_get_verbose@{stats\_\-get\_\-verbose}}
\index{stats_get_verbose@{stats\_\-get\_\-verbose}!bucket_stats.h@{bucket\_\-stats.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int stats\_\-get\_\-verbose ()}\label{bucket__stats_8h_a12}


Get the verbosity level.

\begin{Desc}
\item[Returns: ]\par
the verbosity level \end{Desc}
\index{bucket_stats.h@{bucket\_\-stats.h}!stats_init_package@{stats\_\-init\_\-package}}
\index{stats_init_package@{stats\_\-init\_\-package}!bucket_stats.h@{bucket\_\-stats.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void stats\_\-init\_\-package ()}\label{bucket__stats_8h_a8}


Initializes the Simple Statistics Package, call once before using.

\begin{Desc}
\item[Returns: ]\par
void \end{Desc}
\index{bucket_stats.h@{bucket\_\-stats.h}!stats_record_compute@{stats\_\-record\_\-compute}}
\index{stats_record_compute@{stats\_\-record\_\-compute}!bucket_stats.h@{bucket\_\-stats.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void stats\_\-record\_\-compute ({\bf T\_\-stats\_\-record} $\ast$ {\em rec}, size\_\-t {\em count}, char $\ast$ {\em name}, {\bf T\_\-stats\_\-result} $\ast$ {\em result})}\label{bucket__stats_8h_a11}


Computes the modes and averages from the current statistics record.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
rec}]the statistics record to update ({\bf T\_\-stats\_\-record} {\rm (p.\,\pageref{structT__stats__record})} $\ast$) \item[{\em 
count}]the unit count for normalizing dwavg (size\_\-t) \item[{\em 
name}]the name for verbose output (char $\ast$) \item[{\em 
result}]where to put the computed values ({\bf T\_\-stats\_\-result} {\rm (p.\,\pageref{structT__stats__result})} $\ast$) \end{description}
\end{Desc}
\begin{Desc}
\item[Returns: ]\par
void \end{Desc}
\index{bucket_stats.h@{bucket\_\-stats.h}!stats_record_create@{stats\_\-record\_\-create}}
\index{stats_record_create@{stats\_\-record\_\-create}!bucket_stats.h@{bucket\_\-stats.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf T\_\-stats\_\-record}$\ast$ stats\_\-record\_\-create ()}\label{bucket__stats_8h_a9}


Allocates and initalizes statistics record.

\begin{Desc}
\item[Returns: ]\par
the created record \end{Desc}
\index{bucket_stats.h@{bucket\_\-stats.h}!stats_record_datapoint@{stats\_\-record\_\-datapoint}}
\index{stats_record_datapoint@{stats\_\-record\_\-datapoint}!bucket_stats.h@{bucket\_\-stats.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void stats\_\-record\_\-datapoint ({\bf T\_\-stats\_\-record} $\ast$ {\em rec}, {\bf T\_\-tick} {\em t})}\label{bucket__stats_8h_a10}


Records one datapoint.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
rec}]the statistics record to update ({\bf T\_\-stats\_\-record} {\rm (p.\,\pageref{structT__stats__record})} $\ast$) \item[{\em 
t}]value to record (T\_\-tick) \end{description}
\end{Desc}
\begin{Desc}
\item[Returns: ]\par
void \end{Desc}
\index{bucket_stats.h@{bucket\_\-stats.h}!stats_set_verbose@{stats\_\-set\_\-verbose}}
\index{stats_set_verbose@{stats\_\-set\_\-verbose}!bucket_stats.h@{bucket\_\-stats.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void stats\_\-set\_\-verbose (int {\em verbose})}\label{bucket__stats_8h_a13}


Set the verbosity level.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
verbose}]the verbosity level to set \end{description}
\end{Desc}
