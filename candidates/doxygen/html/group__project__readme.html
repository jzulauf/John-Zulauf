<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>README for Glibc optimization project</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>README for Glibc optimization project</h1><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
</table>
the glibc candidate (test) function directories
<p>
Doxygen documentation is avaiable for the project. Use either
<p>
doxygen -g doxygen.config
<p>
or
<p>
make doc
<p>
to generate.
<p>
Common Elements
<p>
Each directory below constitutes a performance and unit test suite for evaluating and optimizing a given glibc func. The functions from the various sysdeps subdirectories are copied here, minimally edited (e.g. renaming the function to &lt;arch&gt;_&lt;func&gt;), and link with the utest and ptest applications.
<p>
\subsection define_ptest ptest
<p>
ptest is the peformance test, and is uses the framework in common for standard options handling, test inner and outer loops, statitistics gathering and reporting.
<p>
\subsection define_utest utest
<p>
the unit test application for each candidate. Typically these use oversized buffers to check for overruns and underruns.
<p>
\subsection reference_imp Reference Implementation memset contains the "canonical form" of ptest, which can be branched and modified for any additional candidates.
<p>
Creating a new test
<p>
\subsection test_must Things you will need to modify:
<p>
<b><a class="el" href="memcmp_2def__test_8h.html#a4">T_def_Fn</a></b>
<p>
this needs to be defined to match the prototype of the function under test
<p>
<b><a class="el" href="memcmp_2def__test_8h.html#a5">def_tests</a>[]</b>
<p>
needs to contain the function pointer and name of the implementations to test
<p>
<b>DO_TEST_NEXT</b>
<p>
needs to contain the instructions to move through the buffers
<p>
<b>DO_TEST_RUN</b>
<p>
needs to have the invocation line for the function under test (Note: the variables to use must be visible inside the do_test_func boilerplate)
<p>
<b>Makefile</b>
<p>
LGPL_OBJS, BSD_OBJS to include the functions under test
<p>
\subsection test_may Things you may need to modify
<p>
<b>Options</b>
<p>
you can add options easily calling the opts_def function with useful automated value setting (c.f. "Standard Actions" in common/include/opts_util.h). Add these just below test_init in ptest.c:main.
<p>
<b><a class="el" href="permute_2memcpy_2utest_8c.html#a13">main()</a></b> while ... opts_getopt (in ptest.c)
<p>
you may need some behavior not easily supported in the T_opts_action callback
<p>
<b><a class="el" href="structT__test__buffer.html#m20">T_test_buffer::f_wrap</a></b>
<p>
You may need to override this if you need to refill the src or dst buffer on wrap-around.
<p>
<b><a class="el" href="structT__test__buffer.html#m22">T_test_buffer::f_count</a></b>
<p>
if the buffer contents need to change for each count (for example strlen) you can set f_count to a new count change operation. Please examine the default implementation for semantices. <hr><address style="align: right;"><small>Generated on Thu Sep 14 15:20:11 2006 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
