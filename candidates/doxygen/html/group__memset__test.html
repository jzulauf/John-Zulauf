<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Memset performance test</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Memset performance test</h1>The performance and optimzation test for memset. Uses the framework provided by <a class="el" href="group__test.html">"test_" Test framework for performance testing</a> and <a class="el" href="group__loop__test.html">"loop_" Standard loops for testing and reporting</a>. 
<a href="#_details">More...</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
</table>
<b>Status</b>
<p>
The testing and optimization is complete. The winners are noted below.
<p>
<b>Current</b> <b>Standings</b>
<p>
<b>Top</b> <b>Three</b> <b>Overall</b><ol>
<li><b>lx_mmx64_h2</b> <a class="el" href="memset_2def__test_8h.html#a13">lx_memset_mmx64_h2()</a> lx_memset_mmx_h2.S<ul>
<li>increases the minimum size for mmx set operations to 512B</ul>
<li><b>lx_hyb</b> <a class="el" href="memset_2def__test_8h.html#a7">lx_memset_hyb()</a> lx_memset_hyb.S<ul>
<li>combines size and align test with a cmovz (fewest jumps of implementations handling alignment)<li>5-15% better than baseline for dword aligned &lt; 512B<li>Up to 6% worse than baseline 0-7B, 2-3% worse 8-11B<ul>
<li>These are cases handled by inlines by gcc</ul>
<li>2-5% better than baseline for 12-512B for unaligned memsets</ul>
<li><b>lx_zan</b> <a class="el" href="memset_2def__test_8h.html#a5">lx_memset_zan()</a> lx_memset_zan.S<ul>
<li>unaligned performance better than lx_hyb for &lt; 100B<li>aligned performance far worse than lx_hyb</ul>
</ol>
<b>Special</b> <b>Recognition</b><ul>
<li><b>lx_simp</b> <a class="el" href="memset_2def__test_8h.html#a6">lx_memset_simp()</a> lx_memset_simp.S<ul>
<li>fastest <b>&lt;512B</b> <b>aligned</b> (17% above baseline) <li>10% <b>slower</b> than baseline unaligned</ul>
<li><b>lx_mmx64_BA</b> <a class="el" href="memset_2def__test_8h.html#a12">lx_memset_mmx64_BA()</a> lx_memset_mmx64_BA.S <ul>
<li><b>best</b> <b>overall</b> <b>&gt;512B</b><li>quadword aligned quadword writes (<b>fast)</b><li>16% above baseline for aligned<li>15% above baseline for unaligned (2KB-4KB)</ul>
<li><b>lx_mmx64simp</b> <a class="el" href="memset_2def__test_8h.html#a11">lx_memset_mmx64simp()</a> lx_memset_mmx64simp.S <ul>
<li><b>fastest</b> <b>&gt;512B</b> <b>aligned</b><li>5-7% <b>slower</b> than baseline unaligned</ul>
</ul>
<b>Also</b> <b>ran</b> (nothing to see here folks... move along)<ul>
<li><b>local</b> memset() <ul>
<li><b>baseline</b><li>uses i386 'C' with inline asm</ul>
<li><b>i386</b> <a class="el" href="memset_2def__test_8h.html#a1">i386_memset()</a> i386_memset.c<ul>
<li>glibc implementation for x[34]86<li>same as "local" on Gentoo image</ul>
<li><b>i586</b> <a class="el" href="memset_2def__test_8h.html#a2">i586_memset()</a> i586_memset.c<ul>
<li>glibc implementation for x586<li>uses unrolled movl loop<li>slowest overall</ul>
<li><b>686</b> <a class="el" href="memset_2def__test_8h.html#a3">i686_memset()</a> i686_memset.S<ul>
<li>glibc implementation for x686<li>dword alignment preamble broken patch submitted to glibc project<li>up to 10% worse than baseline for non-aligned</ul>
<li><b>lx_hyb_BA</b> <a class="el" href="memset_2def__test_8h.html#a8">lx_memset_hyb_BA()</a> lx_memset_hyb_BA.S<ul>
<li>same as lx_hyb, but alignment logic used quadword boundary<li>BIGGER ALIGN SIZE DOESN'T HELP HYB (and sometimes slows)</ul>
<li><b>lx_mmx</b> <a class="el" href="memset_2def__test_8h.html#a9">lx_memset_mmx()</a> lx_memset_mmx.S "lx_mmx" }<ul>
<li>32 byte unroll<li>never faster than lx_hyb <li>dword aligned qword writes (takes two writes <b>slow</b></ul>
<li><b>lx_mmx64</b> <a class="el" href="memset_2def__test_8h.html#a10">lx_memset_mmx64()</a> lx_memset_mmx64.S<ul>
<li>64 byte unroll<li>fast &gt;512B and aligned<li>unaligned uses dword aligned qword writes (<b>slow)</b> </ul>
</ul>
<hr><address style="align: right;"><small>Generated on Thu Sep 14 15:20:11 2006 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
